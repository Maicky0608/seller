<div class="load-file-container" fxLayout="column" fxLayoutAlign="space-around center">
    <h1 mat-dialog-title>Adjuntar factura</h1>
    <div mat-dialog-content>
        <p>
            La factura electrónica solo <strong>puede ser enviada 1 vez</strong>, Por favor verifique que éste
            adjuntando el archivo correcto.
        </p>
        <p>Archivo PDF de máximo 3 Megabytes y que solo podrá ser enviado una vez.</p>

        <div class="logo" fxLayout="row" fxLayoutAlign="center center" *ngIf="false">
            <div class="container-logo" fxLayout="row" fxLayoutAlign="center center">
                <mat-icon class="material-icons">
                    shopping_cart
                </mat-icon>
            </div>
            <span class="seller">
                &nbsp;Seller
            </span>
            <span class="load-file-gray">
                &nbsp;Center
            </span>
            <span class="point">
                .
            </span>
        </div>
    </div>
    <div mat-dialog-actions>

        <div class="inline-block">
            <div ngfDrop selectable="1" [(validDrag)]="validComboDrag" [(files)]="files" [maxSize]="maxSize"
                [(lastInvalids)]="lastInvalids" [(dragFiles)]="dragFiles" class="well my-drop-zone" fxLayout="column" fxLayoutAlign="center center" 
                [class.invalid-drag]="validComboDrag===false" [class.valid-drag]="validComboDrag" (filesChange)="lastFileAt=getDate()">
               <strong *ngIf="!files.length">Arrastre y suelte el archivo aqui</strong>
               <strong *ngIf="files.length">{{files[0].name}} - {{ files[0].size/1024/1024 | number:'.2' }} MB</strong>
               <mat-icon class="material-icons" *ngIf="!files.length">
                    attach_file
                </mat-icon>
                <mat-icon class="material-icons check" *ngIf="files.length">
                    check_circle
                 </mat-icon>
                <div class="button-fake" fxLayout="column" fxLayoutAlign="center center">
                    <span>
                        ADJUNTAR ARCHIVO
                    </span>
                </div>
            </div>
        </div>
        {{imprimir(files)}}

        <ngfFormData [files]="files" postName="file" [(FormData)]="sendableFormData"></ngfFormData>

        <ngfUploadStatus [(percent)]="progress" [httpEvent]="httpEvent"></ngfUploadStatus>



        <div style="margin-bottom: 40px">
            <h3>{{ files.length }} Qued Files</h3>
            <table class="table">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Size</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let item of files;let i=index">
                        <td>
                            <div>
                                <div class="previewIcon" [ngfBackground]="item"></div>
                            </div>
                            <strong>{{ item.name }}</strong>
                        </td>
                        <td nowrap>
                            {{ item.type }}
                        </td>
                        <td nowrap>
                            {{ item.size/1024/1024 | number:'.2' }} MB
                        </td>
                        <td nowrap>
                            <button type="button" class="btn btn-danger btn-xs" (click)="files.splice(i,1)">
                                <span class="glyphicon glyphicon-trash"></span>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>

            <div>
                <div>
                    Queue progress:
                    <div class="progress" style="">
                        <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': progress + '%' }"></div>
                    </div>
                </div>

                <ng-container *ngIf="lastFileAt">
                    <p>
                        <strong>Last file(s) selected At:</strong> {{ lastFileAt | date : 'longTime' }}
                    </p>
                </ng-container>

                <i *ngIf="progress==100" class="glyphicon glyphicon-ok"></i>

                <button type="button" class="btn btn-success btn-s" (click)="uploadFiles(files)" [disabled]="!files.length">
                    <span class="glyphicon glyphicon-upload"></span> Upload all
                </button>

                <button type="button" class="btn btn-warning btn-s" (click)="cancel()" [disabled]="!httpEmitter">
                    <span class="glyphicon glyphicon-ban-circle"></span> Cancel all
                </button>
                <button type="button" class="btn btn-danger btn-s" (click)="files.length=0" [disabled]="!files.length">
                    <span class="glyphicon glyphicon-trash"></span> Remove all
                </button>
            </div>
        </div>

    </div>
</div>